å†™åˆ°è¿™é‡Œï¼Œä½ å·²ç»æŒæ¡äº†ä»éœ€æ±‚æ–‡æ¡£åˆ°æœ€å°å¯ç”¨å®ç°çš„æµç¨‹ã€‚å¦‚æœè¿˜ä¸ç†Ÿï¼Œå»ºè®®ä½ å¯¹ç…§æºç ä¸€æ­¥æ­¥æ”¹ä¸€éã€‚

## é™„å½• Aï¼šæ¯ä¸€æ­¥çš„ curl ç¤ºä¾‹

> ä»¥ä¸‹ç¤ºä¾‹å‡è®¾åç«¯è¿è¡Œåœ¨ `http://localhost:8000`ã€‚

### 1) åˆ›å»ºé¢˜ç›®ï¼ˆPOST /v1/itemsï¼‰

```bash
curl -X POST "http://localhost:8000/v1/items" \
  -H "Content-Type: application/json" \
  -d '{
    "problem_text":"å·²çŸ¥åœ†é”¥æ›²çº¿â€¦â€¦",
    "diagram_desc":"å›¾ä¸­æœ‰é‡å¿ƒ Gï¼ŒAB ä¸ºå¼¦",
    "method_chain":"è®¾å‚â†’å¯¼æ•°â†’éŸ¦è¾¾â†’æœ€å€¼",
    "solution_outline":"å…ˆè®¾å‚æ•°ï¼Œå†ç”±éŸ¦è¾¾æ±‚æœ€å€¼",
    "user_notes":"æ³¨æ„åˆ†å¼å‡½æ•°çš„å®šä¹‰åŸŸ",
    "user_tags":["è§£æå‡ ä½•","æœ€å€¼","é‡å¿ƒ"],
    "meta":{"province":"æµ™æ±Ÿ","year":"2019","source":"çœŸé¢˜","grade":"é«˜ä¸­"},
    "images":[]
  }'
```

### 2) æ›´æ–°é¢˜ç›®ï¼ˆPATCH /v1/items/{item_id}ï¼‰

```bash
curl -X PATCH "http://localhost:8000/v1/items/f62f3242-5e81-4faa-9b25-6a1d83835554" \
  -H "Content-Type: application/json" \
  -d '{
    "method_chain":"è®¾å‚â†’å¯¼æ•°â†’éŸ¦è¾¾â†’æœ€å€¼â†’å‡ ä½•æ„ä¹‰",
    "user_notes":"è¡¥å……ï¼šé‡å¿ƒåæ ‡å…¬å¼"
  }'
```

### 3) è·å–é¢˜ç›®è¯¦æƒ…ï¼ˆGET /v1/items/{item_id}ï¼‰

```bash
curl "http://localhost:8000/v1/items/f62f3242-5e81-4faa-9b25-6a1d83835554"
```

### 4) æœç´¢ï¼ˆPOST /v1/searchï¼‰

```bash
curl -X POST "http://localhost:8000/v1/search" \
  -H "Content-Type: application/json" \
  -d '{
    "query":" ",
    "top_n":10,
    "meta_filters":{"year":"2019"}
  }'
```

### 5) åé¦ˆï¼ˆPOST /v1/feedbackï¼‰

```bash
curl -X POST "http://localhost:8000/v1/feedback" \
  -H "Content-Type: application/json" \
  -d '{
    "query_id":"<query_id>",
    "item_id":"<item_id>",
    "vote":1,
    "reason":"å‘½ä¸­æ–¹æ³•é“¾"
  }'
```

## é™„å½• Bï¼šæ•°æ®åº“ â†’ UI çš„æ•°æ®æµå›¾

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  problem_items     â”‚
â”‚  (é¢˜ç›®ä¸»æ¡£æ¡ˆ)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚  upsert 5è§†å›¾
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  search_views      â”‚
â”‚  (problem/methodâ€¦) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ FTS æŸ¥è¯¢ + ts_headline
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /v1/search         â”‚
â”‚  èšåˆ evidence       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ JSON è¿”å›
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Next.js UI         â”‚
â”‚  ResultCard         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ ğŸ‘/ğŸ‘ åé¦ˆ
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /v1/feedback       â”‚
â”‚  å†™å…¥ feedback è¡¨    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

SELECT id, meta
FROM problem_items
ORDER BY created_at DESC
LIMIT 10;
